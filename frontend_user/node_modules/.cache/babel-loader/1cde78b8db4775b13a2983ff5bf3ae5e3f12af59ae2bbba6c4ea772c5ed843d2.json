{"ast":null,"code":"var _jsxFileName = \"C:\\\\tarbeya_askar\\\\tarbeya_system_master\\\\frontend_user\\\\src\\\\components\\\\StudentForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { enrolledStudentsApi, registeredStudentsApi, facultiesApi, researchTopicsApi, configApi } from '../services/api';\nimport { teamsApi } from '../services/api';\nimport './StudentForm.css';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst academicYears = ['الفرقة الأولى', 'الفرقة الثانية', 'الفرقة الثالثة', 'الفرقة الرابعة', 'الفرقة الخامسة', 'الفرقة السادسة'];\nfunction StudentForm({\n  onSuccess,\n  registrationOpen = true\n}) {\n  _s();\n  const [colleges, setColleges] = useState([]);\n  const [researchTopics, setResearchTopics] = useState([]);\n  const [formData, setFormData] = useState({\n    fullName: '',\n    telephone: '',\n    nationalId: '',\n    serialNumber: '',\n    squadNumber: '',\n    college: '',\n    academicYear: '',\n    researchTopic: ''\n  });\n  const [errors, setErrors] = useState({});\n  const [touched, setTouched] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState({\n    type: '',\n    text: ''\n  });\n\n  // Fetch faculties, research topics, and config on mount\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        // Fetch faculties\n        const facultiesRes = await facultiesApi.getAll();\n        setColleges(facultiesRes.data.map(f => f.faculty_name));\n\n        // Fetch research topics\n        const topicsRes = await researchTopicsApi.getAll();\n        setResearchTopics(topicsRes.data.map(t => t.topic_name));\n      } catch (err) {\n        console.error('Error fetching data:', err);\n      }\n    };\n    fetchData();\n  }, []);\n\n  // Validation rules\n  const arabicRegex = /^[\\u0600-\\u06FF\\s]+$/;\n  const englishNumbersRegex = /^[0-9]+$/;\n  const phoneRegex = /^01[0-9]{9}$/;\n  const nationalIdRegex = /^[0-9]{14}$/;\n\n  // Real-time validation function\n  const validateField = (name, value) => {\n    let error = '';\n    switch (name) {\n      case 'fullName':\n        if (!value.trim()) {\n          error = 'الاسم الرباعي مطلوب';\n        } else if (!arabicRegex.test(value)) {\n          error = 'يجب إدخال الاسم باللغة العربية فقط';\n        } else {\n          const nameParts = value.trim().split(/\\s+/);\n          if (nameParts.length < 4) {\n            error = 'يجب إدخال الاسم الرباعي كاملاً (4 أسماء على الأقل)';\n          }\n        }\n        break;\n      case 'telephone':\n        if (!value) {\n          error = 'رقم الهاتف مطلوب';\n        } else if (!englishNumbersRegex.test(value)) {\n          error = 'يجب إدخال أرقام إنجليزية فقط';\n        } else if (!phoneRegex.test(value)) {\n          error = 'رقم الهاتف يجب أن يبدأ بـ 01 ويتكون من 11 رقم';\n        }\n        break;\n      case 'nationalId':\n        if (!value) {\n          error = 'الرقم القومي مطلوب';\n        } else if (!englishNumbersRegex.test(value)) {\n          error = 'يجب إدخال أرقام إنجليزية فقط';\n        } else if (!nationalIdRegex.test(value)) {\n          error = 'الرقم القومي يجب أن يتكون من 14 رقم';\n        } else if (!value.startsWith('2') && !value.startsWith('3')) {\n          error = 'الرقم القومي يجب أن يبدأ بـ 2 أو 3';\n        }\n        break;\n      case 'serialNumber':\n        if (!value) {\n          error = 'الرقم التسلسلي مطلوب';\n        } else if (!englishNumbersRegex.test(value)) {\n          error = 'يجب إدخال أرقام إنجليزية فقط';\n        }\n        break;\n      case 'squadNumber':\n        if (value && !englishNumbersRegex.test(value)) {\n          error = 'يجب إدخال أرقام إنجليزية فقط';\n        }\n        break;\n      case 'college':\n        if (!value) {\n          error = 'يجب اختيار الكلية';\n        }\n        break;\n      case 'academicYear':\n        if (!value) {\n          error = 'يجب اختيار السنة الدراسية';\n        }\n        break;\n      default:\n        break;\n    }\n    return error;\n  };\n\n  // Handle input change with real-time validation\n  const handleChange = e => {\n    const {\n      name,\n      value\n    } = e.target;\n\n    // For Arabic name field, only allow Arabic characters and spaces\n    if (name === 'fullName') {\n      if (value && !arabicRegex.test(value) && value !== '') {\n        return; // Prevent non-Arabic input\n      }\n    }\n\n    // For number fields, only allow English digits\n    if (['telephone', 'nationalId', 'serialNumber', 'squadNumber'].includes(name)) {\n      if (value && !englishNumbersRegex.test(value) && value !== '') {\n        return; // Prevent non-numeric input\n      }\n    }\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n\n    // Validate on change if field was touched\n    if (touched[name]) {\n      const error = validateField(name, value);\n      setErrors(prev => ({\n        ...prev,\n        [name]: error\n      }));\n    }\n  };\n\n  // Handle field blur\n  const handleBlur = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setTouched(prev => ({\n      ...prev,\n      [name]: true\n    }));\n    const error = validateField(name, value);\n    setErrors(prev => ({\n      ...prev,\n      [name]: error\n    }));\n  };\n\n  // Validate entire form\n  const validateForm = () => {\n    const newErrors = {};\n    let isValid = true;\n    Object.keys(formData).forEach(key => {\n      const error = validateField(key, formData[key]);\n      if (error) {\n        newErrors[key] = error;\n        isValid = false;\n      }\n    });\n    setErrors(newErrors);\n    setTouched({\n      fullName: true,\n      telephone: true,\n      nationalId: true,\n      serialNumber: true,\n      squadNumber: true,\n      college: true,\n      academicYear: true\n    });\n    return isValid;\n  };\n\n  // Get field class based on validation state\n  const getFieldClass = fieldName => {\n    if (!touched[fieldName]) return '';\n    return errors[fieldName] ? 'invalid' : 'valid';\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setMessage({\n      type: '',\n      text: ''\n    });\n    if (!registrationOpen) {\n      setMessage({\n        type: 'error',\n        text: 'التسجيل مغلق حالياً'\n      });\n      return;\n    }\n    if (!validateForm()) {\n      setMessage({\n        type: 'error',\n        text: 'يرجى تصحيح الأخطاء في النموذج'\n      });\n      return;\n    }\n    setLoading(true);\n    try {\n      // First verify student is enrolled\n      let enrolledStudent;\n      try {\n        const enrolledRes = await enrolledStudentsApi.getByNationalId(formData.nationalId);\n        enrolledStudent = enrolledRes.data;\n      } catch (err) {\n        var _err$response;\n        if (((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.status) === 404) {\n          setMessage({\n            type: 'error',\n            text: 'الرقم القومي غير مسجل في قوائم الطلاب المقيدين'\n          });\n          setLoading(false);\n          return;\n        }\n        throw err;\n      }\n\n      // Check if already registered for research\n      try {\n        await registeredStudentsApi.getByNationalId(formData.nationalId);\n        setMessage({\n          type: 'error',\n          text: 'هذا الطالب مسجل بالفعل في نظام البحث'\n        });\n        setLoading(false);\n        return;\n      } catch (err) {\n        var _err$response2;\n        // 404 means not registered yet - that's what we want\n        if (((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.status) !== 404) {\n          throw err;\n        }\n      }\n\n      // Register the student for research\n      const registrationData = {\n        national_id: parseInt(formData.nationalId),\n        sequence_number: parseInt(formData.serialNumber),\n        student_name: formData.fullName,\n        phone_number: formData.telephone,\n        faculty_name: formData.college,\n        research_name: formData.researchTopic || 'غير محدد',\n        educational_level: formData.academicYear,\n        team_code: formData.squadNumber || 'UNASSIGNED'\n      };\n      await registeredStudentsApi.create(registrationData);\n\n      // If the provided team code corresponds to an existing team, update other members' registered records\n      if (registrationData.team_code && registrationData.team_code !== 'UNASSIGNED') {\n        try {\n          const teamRes = await teamsApi.getByCode(registrationData.team_code);\n          const team = teamRes.data;\n          const otherNids = (team.national_ids || team.student_names || []).filter(n => String(n) !== String(registrationData.national_id));\n          for (const nid of otherNids) {\n            try {\n              const regRes = await registeredStudentsApi.getByNationalId(nid);\n              const reg = regRes.data;\n              await registeredStudentsApi.update(reg._id, {\n                team_code: registrationData.team_code\n              });\n            } catch (err) {\n              var _err$response3;\n              if ((_err$response3 = err.response) !== null && _err$response3 !== void 0 && _err$response3.status && err.response.status !== 404) {\n                console.error('Error updating teammate after registration', err);\n              }\n            }\n          }\n        } catch (err) {\n          // team not found or error — ignore\n        }\n      }\n      // Update enrolled student to mark as registered\n      await enrolledStudentsApi.update(enrolledStudent._id, {\n        registered_research: true\n      });\n      setMessage({\n        type: 'success',\n        text: 'تم التسجيل بنجاح! يمكنك الآن تسجيل الدخول.'\n      });\n      setFormData({\n        fullName: '',\n        telephone: '',\n        nationalId: '',\n        serialNumber: '',\n        squadNumber: '',\n        college: '',\n        academicYear: '',\n        researchTopic: ''\n      });\n      setErrors({});\n      setTouched({});\n      setTimeout(() => {\n        if (onSuccess) onSuccess();\n      }, 2000);\n    } catch (error) {\n      var _error$response, _error$response$data;\n      setMessage({\n        type: 'error',\n        text: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.error) || 'حدث خطأ أثناء التسجيل'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleReset = () => {\n    setFormData({\n      fullName: '',\n      telephone: '',\n      nationalId: '',\n      serialNumber: '',\n      squadNumber: '',\n      college: '',\n      academicYear: '',\n      researchTopic: ''\n    });\n    setErrors({});\n    setTouched({});\n    setMessage({\n      type: '',\n      text: ''\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-container\",\n    children: [!registrationOpen && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"message error\",\n      children: \"\\u0627\\u0644\\u062A\\u0633\\u062C\\u064A\\u0644 \\u0645\\u063A\\u0644\\u0642 \\u062D\\u0627\\u0644\\u064A\\u0627\\u064B. \\u064A\\u0631\\u062C\\u0649 \\u0627\\u0644\\u0645\\u062D\\u0627\\u0648\\u0644\\u0629 \\u0644\\u0627\\u062D\\u0642\\u0627\\u064B.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"\\u0627\\u0633\\u062A\\u0645\\u0627\\u0631\\u0629 \\u062A\\u0633\\u062C\\u064A\\u0644 \\u0627\\u0644\\u0637\\u0644\\u0627\\u0628\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u064A\\u0631\\u062C\\u0649 \\u0645\\u0644\\u0621 \\u062C\\u0645\\u064A\\u0639 \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u0645\\u0637\\u0644\\u0648\\u0628\\u0629\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 353,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 7\n    }, this), message.text && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `message ${message.type}`,\n      children: message.text\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 357,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"\\u0627\\u0644\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0631\\u0628\\u0627\\u0639\\u064A (\\u0628\\u0627\\u0644\\u0644\\u063A\\u0629 \\u0627\\u0644\\u0639\\u0631\\u0628\\u064A\\u0629)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 364,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-group full-width\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0627\\u0644\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0631\\u0628\\u0627\\u0639\\u064A *\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"fullName\",\n            value: formData.fullName,\n            onChange: handleChange,\n            onBlur: handleBlur,\n            placeholder: \"\\u0623\\u062F\\u062E\\u0644 \\u0627\\u0644\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0631\\u0628\\u0627\\u0639\\u064A \\u0628\\u0627\\u0644\\u0644\\u063A\\u0629 \\u0627\\u0644\\u0639\\u0631\\u0628\\u064A\\u0629\",\n            className: getFieldClass('fullName'),\n            dir: \"rtl\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 13\n          }, this), touched.fullName && errors.fullName && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"error-text\",\n            children: errors.fullName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 15\n          }, this), touched.fullName && !errors.fullName && formData.fullName && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"success-text\",\n            children: \"\\u2713 \\u0635\\u062D\\u064A\\u062D\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 381,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"hint-text\",\n            children: \"\\u0623\\u062F\\u062E\\u0644 \\u0627\\u0644\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0623\\u0648\\u0644 \\u0648\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0623\\u0628 \\u0648\\u0627\\u0633\\u0645 \\u0627\\u0644\\u062C\\u062F \\u0648\\u0627\\u0633\\u0645 \\u0627\\u0644\\u0639\\u0627\\u0626\\u0644\\u0629\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 383,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 363,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u0647\\u0648\\u064A\\u0629 (\\u0628\\u0627\\u0644\\u0623\\u0631\\u0642\\u0627\\u0645 \\u0627\\u0644\\u0625\\u0646\\u062C\\u0644\\u064A\\u0632\\u064A\\u0629)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 388,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"identity-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0647\\u0627\\u062A\\u0641 *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 391,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"telephone\",\n              value: formData.telephone,\n              onChange: handleChange,\n              onBlur: handleBlur,\n              placeholder: \"01XXXXXXXXX\",\n              className: getFieldClass('telephone'),\n              dir: \"ltr\",\n              maxLength: \"11\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 392,\n              columnNumber: 15\n            }, this), touched.telephone && errors.telephone && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"error-text\",\n              children: errors.telephone\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 404,\n              columnNumber: 17\n            }, this), touched.telephone && !errors.telephone && formData.telephone && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"success-text\",\n              children: \"\\u2713 \\u0635\\u062D\\u064A\\u062D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"hint-text\",\n              children: \"\\u0645\\u062B\\u0627\\u0644: 01012345678\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 390,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u0627\\u0644\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0642\\u0648\\u0645\\u064A *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"nationalId\",\n              value: formData.nationalId,\n              onChange: handleChange,\n              onBlur: handleBlur,\n              placeholder: \"XXXXXXXXXXXXXX\",\n              className: getFieldClass('nationalId'),\n              dir: \"ltr\",\n              maxLength: \"14\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 15\n            }, this), touched.nationalId && errors.nationalId && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"error-text\",\n              children: errors.nationalId\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 17\n            }, this), touched.nationalId && !errors.nationalId && formData.nationalId && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"success-text\",\n              children: \"\\u2713 \\u0635\\u062D\\u064A\\u062D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 428,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"hint-text\",\n              children: \"14 \\u0631\\u0642\\u0645 \\u0645\\u0646 \\u0627\\u0644\\u0628\\u0637\\u0627\\u0642\\u0629 \\u0627\\u0644\\u0634\\u062E\\u0635\\u064A\\u0629\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u0627\\u0644\\u0631\\u0642\\u0645 \\u0627\\u0644\\u062A\\u0633\\u0644\\u0633\\u0644\\u064A *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 433,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"serialNumber\",\n              value: formData.serialNumber,\n              onChange: handleChange,\n              onBlur: handleBlur,\n              placeholder: \"\\u0623\\u062F\\u062E\\u0644 \\u0627\\u0644\\u0631\\u0642\\u0645 \\u0627\\u0644\\u062A\\u0633\\u0644\\u0633\\u0644\\u064A\",\n              className: getFieldClass('serialNumber'),\n              dir: \"ltr\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 434,\n              columnNumber: 15\n            }, this), touched.serialNumber && errors.serialNumber && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"error-text\",\n              children: errors.serialNumber\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 17\n            }, this), touched.serialNumber && !errors.serialNumber && formData.serialNumber && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"success-text\",\n              children: \"\\u2713 \\u0635\\u062D\\u064A\\u062D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0635\\u064A\\u0644\\u0629 (\\u0644\\u0644\\u0630\\u0643\\u0648\\u0631 - \\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\\u064A)\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"text\",\n              name: \"squadNumber\",\n              value: formData.squadNumber,\n              onChange: handleChange,\n              onBlur: handleBlur,\n              placeholder: \"\\u0623\\u062F\\u062E\\u0644 \\u0631\\u0642\\u0645 \\u0627\\u0644\\u0641\\u0635\\u064A\\u0644\\u0629\",\n              className: getFieldClass('squadNumber'),\n              dir: \"ltr\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 15\n            }, this), touched.squadNumber && errors.squadNumber && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"error-text\",\n              children: errors.squadNumber\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 464,\n              columnNumber: 17\n            }, this), touched.squadNumber && !errors.squadNumber && formData.squadNumber && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"success-text\",\n              children: \"\\u2713 \\u0635\\u062D\\u064A\\u062D\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 467,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 451,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 389,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-section\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: \"\\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0627\\u0644\\u0623\\u0643\\u0627\\u062F\\u064A\\u0645\\u064A\\u0629\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 474,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"academic-grid\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u0627\\u0644\\u0643\\u0644\\u064A\\u0629 *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"college\",\n              value: formData.college,\n              onChange: handleChange,\n              onBlur: handleBlur,\n              className: getFieldClass('college'),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"-- \\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0643\\u0644\\u064A\\u0629 --\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 485,\n                columnNumber: 17\n              }, this), colleges.map((college, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: college,\n                children: college\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 487,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 15\n            }, this), touched.college && errors.college && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"error-text\",\n              children: errors.college\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 17\n            }, this), touched.college && !errors.college && formData.college && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"success-text\",\n              children: \"\\u2713 \\u062A\\u0645 \\u0627\\u0644\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 496,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 476,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"\\u0627\\u0644\\u0633\\u0646\\u0629 \\u0627\\u0644\\u062F\\u0631\\u0627\\u0633\\u064A\\u0629 *\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"academicYear\",\n              value: formData.academicYear,\n              onChange: handleChange,\n              onBlur: handleBlur,\n              className: getFieldClass('academicYear'),\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\",\n                children: \"-- \\u0627\\u062E\\u062A\\u0631 \\u0627\\u0644\\u0633\\u0646\\u0629 \\u0627\\u0644\\u062F\\u0631\\u0627\\u0633\\u064A\\u0629 --\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 508,\n                columnNumber: 17\n              }, this), academicYears.map((year, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: year,\n                children: year\n              }, index, false, {\n                fileName: _jsxFileName,\n                lineNumber: 510,\n                columnNumber: 19\n              }, this))]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 501,\n              columnNumber: 15\n            }, this), touched.academicYear && errors.academicYear && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"error-text\",\n              children: errors.academicYear\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 516,\n              columnNumber: 17\n            }, this), touched.academicYear && !errors.academicYear && formData.academicYear && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"success-text\",\n              children: \"\\u2713 \\u062A\\u0645 \\u0627\\u0644\\u0627\\u062E\\u062A\\u064A\\u0627\\u0631\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 519,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 499,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 473,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"submit-btn\",\n          disabled: loading,\n          children: loading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"spinner-small\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 529,\n              columnNumber: 17\n            }, this), \"\\u062C\\u0627\\u0631\\u064A \\u0627\\u0644\\u062A\\u0633\\u062C\\u064A\\u0644...\"]\n          }, void 0, true) : 'تسجيل الطالب'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"reset-btn\",\n          onClick: handleReset,\n          disabled: loading,\n          children: \"\\u0645\\u0633\\u062D \\u0627\\u0644\\u0628\\u064A\\u0627\\u0646\\u0627\\u062A\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 362,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 345,\n    columnNumber: 5\n  }, this);\n}\n_s(StudentForm, \"XbJXkW00eMJOEtLXOB0V1pPNs9g=\");\n_c = StudentForm;\nexport default StudentForm;\nvar _c;\n$RefreshReg$(_c, \"StudentForm\");","map":{"version":3,"names":["React","useState","useEffect","enrolledStudentsApi","registeredStudentsApi","facultiesApi","researchTopicsApi","configApi","teamsApi","jsxDEV","_jsxDEV","Fragment","_Fragment","academicYears","StudentForm","onSuccess","registrationOpen","_s","colleges","setColleges","researchTopics","setResearchTopics","formData","setFormData","fullName","telephone","nationalId","serialNumber","squadNumber","college","academicYear","researchTopic","errors","setErrors","touched","setTouched","loading","setLoading","message","setMessage","type","text","fetchData","facultiesRes","getAll","data","map","f","faculty_name","topicsRes","t","topic_name","err","console","error","arabicRegex","englishNumbersRegex","phoneRegex","nationalIdRegex","validateField","name","value","trim","test","nameParts","split","length","startsWith","handleChange","e","target","includes","prev","handleBlur","validateForm","newErrors","isValid","Object","keys","forEach","key","getFieldClass","fieldName","handleSubmit","preventDefault","enrolledStudent","enrolledRes","getByNationalId","_err$response","response","status","_err$response2","registrationData","national_id","parseInt","sequence_number","student_name","phone_number","research_name","educational_level","team_code","create","teamRes","getByCode","team","otherNids","national_ids","student_names","filter","n","String","nid","regRes","reg","update","_id","_err$response3","registered_research","setTimeout","_error$response","_error$response$data","handleReset","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","onChange","onBlur","placeholder","dir","maxLength","index","year","disabled","onClick","_c","$RefreshReg$"],"sources":["C:/tarbeya_askar/tarbeya_system_master/frontend_user/src/components/StudentForm.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  enrolledStudentsApi, \n  registeredStudentsApi, \n  facultiesApi, \n  researchTopicsApi,\n  configApi \n} from '../services/api';\nimport { teamsApi } from '../services/api';\nimport './StudentForm.css';\n\nconst academicYears = [\n  'الفرقة الأولى',\n  'الفرقة الثانية',\n  'الفرقة الثالثة',\n  'الفرقة الرابعة',\n  'الفرقة الخامسة',\n  'الفرقة السادسة'\n];\n\nfunction StudentForm({ onSuccess, registrationOpen = true }) {\n  const [colleges, setColleges] = useState([]);\n  const [researchTopics, setResearchTopics] = useState([]);\n  const [formData, setFormData] = useState({\n    fullName: '',\n    telephone: '',\n    nationalId: '',\n    serialNumber: '',\n    squadNumber: '',\n    college: '',\n    academicYear: '',\n    researchTopic: ''\n  });\n\n  const [errors, setErrors] = useState({});\n  const [touched, setTouched] = useState({});\n  const [loading, setLoading] = useState(false);\n  const [message, setMessage] = useState({ type: '', text: '' });\n\n  // Fetch faculties, research topics, and config on mount\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        // Fetch faculties\n        const facultiesRes = await facultiesApi.getAll();\n        setColleges(facultiesRes.data.map(f => f.faculty_name));\n\n        // Fetch research topics\n        const topicsRes = await researchTopicsApi.getAll();\n        setResearchTopics(topicsRes.data.map(t => t.topic_name));\n      } catch (err) {\n        console.error('Error fetching data:', err);\n      }\n    };\n    fetchData();\n  }, []);\n\n  // Validation rules\n  const arabicRegex = /^[\\u0600-\\u06FF\\s]+$/;\n  const englishNumbersRegex = /^[0-9]+$/;\n  const phoneRegex = /^01[0-9]{9}$/;\n  const nationalIdRegex = /^[0-9]{14}$/;\n\n  // Real-time validation function\n  const validateField = (name, value) => {\n    let error = '';\n\n    switch (name) {\n      case 'fullName':\n        if (!value.trim()) {\n          error = 'الاسم الرباعي مطلوب';\n        } else if (!arabicRegex.test(value)) {\n          error = 'يجب إدخال الاسم باللغة العربية فقط';\n        } else {\n          const nameParts = value.trim().split(/\\s+/);\n          if (nameParts.length < 4) {\n            error = 'يجب إدخال الاسم الرباعي كاملاً (4 أسماء على الأقل)';\n          }\n        }\n        break;\n\n      case 'telephone':\n        if (!value) {\n          error = 'رقم الهاتف مطلوب';\n        } else if (!englishNumbersRegex.test(value)) {\n          error = 'يجب إدخال أرقام إنجليزية فقط';\n        } else if (!phoneRegex.test(value)) {\n          error = 'رقم الهاتف يجب أن يبدأ بـ 01 ويتكون من 11 رقم';\n        }\n        break;\n\n      case 'nationalId':\n        if (!value) {\n          error = 'الرقم القومي مطلوب';\n        } else if (!englishNumbersRegex.test(value)) {\n          error = 'يجب إدخال أرقام إنجليزية فقط';\n        } else if (!nationalIdRegex.test(value)) {\n          error = 'الرقم القومي يجب أن يتكون من 14 رقم';\n        } else if (!value.startsWith('2') && !value.startsWith('3')) {\n          error = 'الرقم القومي يجب أن يبدأ بـ 2 أو 3';\n        }\n        break;\n\n      case 'serialNumber':\n        if (!value) {\n          error = 'الرقم التسلسلي مطلوب';\n        } else if (!englishNumbersRegex.test(value)) {\n          error = 'يجب إدخال أرقام إنجليزية فقط';\n        }\n        break;\n\n      case 'squadNumber':\n        if (value && !englishNumbersRegex.test(value)) {\n          error = 'يجب إدخال أرقام إنجليزية فقط';\n        }\n        break;\n\n      case 'college':\n        if (!value) {\n          error = 'يجب اختيار الكلية';\n        }\n        break;\n\n      case 'academicYear':\n        if (!value) {\n          error = 'يجب اختيار السنة الدراسية';\n        }\n        break;\n\n      default:\n        break;\n    }\n\n    return error;\n  };\n\n  // Handle input change with real-time validation\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    \n    // For Arabic name field, only allow Arabic characters and spaces\n    if (name === 'fullName') {\n      if (value && !arabicRegex.test(value) && value !== '') {\n        return; // Prevent non-Arabic input\n      }\n    }\n    \n    // For number fields, only allow English digits\n    if (['telephone', 'nationalId', 'serialNumber', 'squadNumber'].includes(name)) {\n      if (value && !englishNumbersRegex.test(value) && value !== '') {\n        return; // Prevent non-numeric input\n      }\n    }\n\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n\n    // Validate on change if field was touched\n    if (touched[name]) {\n      const error = validateField(name, value);\n      setErrors(prev => ({\n        ...prev,\n        [name]: error\n      }));\n    }\n  };\n\n  // Handle field blur\n  const handleBlur = (e) => {\n    const { name, value } = e.target;\n    setTouched(prev => ({\n      ...prev,\n      [name]: true\n    }));\n    \n    const error = validateField(name, value);\n    setErrors(prev => ({\n      ...prev,\n      [name]: error\n    }));\n  };\n\n  // Validate entire form\n  const validateForm = () => {\n    const newErrors = {};\n    let isValid = true;\n\n    Object.keys(formData).forEach(key => {\n      const error = validateField(key, formData[key]);\n      if (error) {\n        newErrors[key] = error;\n        isValid = false;\n      }\n    });\n\n    setErrors(newErrors);\n    setTouched({\n      fullName: true,\n      telephone: true,\n      nationalId: true,\n      serialNumber: true,\n      squadNumber: true,\n      college: true,\n      academicYear: true\n    });\n\n    return isValid;\n  };\n\n  // Get field class based on validation state\n  const getFieldClass = (fieldName) => {\n    if (!touched[fieldName]) return '';\n    return errors[fieldName] ? 'invalid' : 'valid';\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setMessage({ type: '', text: '' });\n\n    if (!registrationOpen) {\n      setMessage({ type: 'error', text: 'التسجيل مغلق حالياً' });\n      return;\n    }\n\n    if (!validateForm()) {\n      setMessage({ type: 'error', text: 'يرجى تصحيح الأخطاء في النموذج' });\n      return;\n    }\n\n    setLoading(true);\n\n    try {\n      // First verify student is enrolled\n      let enrolledStudent;\n      try {\n        const enrolledRes = await enrolledStudentsApi.getByNationalId(formData.nationalId);\n        enrolledStudent = enrolledRes.data;\n      } catch (err) {\n        if (err.response?.status === 404) {\n          setMessage({ type: 'error', text: 'الرقم القومي غير مسجل في قوائم الطلاب المقيدين' });\n          setLoading(false);\n          return;\n        }\n        throw err;\n      }\n\n      // Check if already registered for research\n      try {\n        await registeredStudentsApi.getByNationalId(formData.nationalId);\n        setMessage({ type: 'error', text: 'هذا الطالب مسجل بالفعل في نظام البحث' });\n        setLoading(false);\n        return;\n      } catch (err) {\n        // 404 means not registered yet - that's what we want\n        if (err.response?.status !== 404) {\n          throw err;\n        }\n      }\n\n      // Register the student for research\n      const registrationData = {\n        national_id: parseInt(formData.nationalId),\n        sequence_number: parseInt(formData.serialNumber),\n        student_name: formData.fullName,\n        phone_number: formData.telephone,\n        faculty_name: formData.college,\n        research_name: formData.researchTopic || 'غير محدد',\n        educational_level: formData.academicYear,\n        team_code: formData.squadNumber || 'UNASSIGNED'\n      };\n\n      await registeredStudentsApi.create(registrationData);\n\n      // If the provided team code corresponds to an existing team, update other members' registered records\n      if (registrationData.team_code && registrationData.team_code !== 'UNASSIGNED') {\n        try {\n          const teamRes = await teamsApi.getByCode(registrationData.team_code);\n          const team = teamRes.data;\n          const otherNids = (team.national_ids || team.student_names || []).filter(n => String(n) !== String(registrationData.national_id));\n          for (const nid of otherNids) {\n            try {\n              const regRes = await registeredStudentsApi.getByNationalId(nid);\n              const reg = regRes.data;\n              await registeredStudentsApi.update(reg._id, { team_code: registrationData.team_code });\n            } catch (err) {\n              if (err.response?.status && err.response.status !== 404) {\n                console.error('Error updating teammate after registration', err);\n              }\n            }\n          }\n        } catch (err) {\n          // team not found or error — ignore\n        }\n      }\n      // Update enrolled student to mark as registered\n      await enrolledStudentsApi.update(enrolledStudent._id, {\n        registered_research: true\n      });\n\n      setMessage({ type: 'success', text: 'تم التسجيل بنجاح! يمكنك الآن تسجيل الدخول.' });\n      setFormData({\n        fullName: '',\n        telephone: '',\n        nationalId: '',\n        serialNumber: '',\n        squadNumber: '',\n        college: '',\n        academicYear: '',\n        researchTopic: ''\n      });\n      setErrors({});\n      setTouched({});\n      setTimeout(() => {\n        if (onSuccess) onSuccess();\n      }, 2000);\n    } catch (error) {\n      setMessage({ \n        type: 'error', \n        text: error.response?.data?.error || 'حدث خطأ أثناء التسجيل' \n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleReset = () => {\n    setFormData({\n      fullName: '',\n      telephone: '',\n      nationalId: '',\n      serialNumber: '',\n      squadNumber: '',\n      college: '',\n      academicYear: '',\n      researchTopic: ''\n    });\n    setErrors({});\n    setTouched({});\n    setMessage({ type: '', text: '' });\n  };\n\n  return (\n    <div className=\"form-container\">\n      {!registrationOpen && (\n        <div className=\"message error\">\n          التسجيل مغلق حالياً. يرجى المحاولة لاحقاً.\n        </div>\n      )}\n      <div className=\"form-header\">\n        <h3>استمارة تسجيل الطلاب</h3>\n        <p>يرجى ملء جميع البيانات المطلوبة</p>\n      </div>\n\n      {message.text && (\n        <div className={`message ${message.type}`}>\n          {message.text}\n        </div>\n      )}\n\n      <form onSubmit={handleSubmit}>\n        <div className=\"form-section\">\n          <h4>الاسم الرباعي (باللغة العربية)</h4>\n          <div className=\"form-group full-width\">\n            <label>الاسم الرباعي *</label>\n            <input\n              type=\"text\"\n              name=\"fullName\"\n              value={formData.fullName}\n              onChange={handleChange}\n              onBlur={handleBlur}\n              placeholder=\"أدخل الاسم الرباعي باللغة العربية\"\n              className={getFieldClass('fullName')}\n              dir=\"rtl\"\n            />\n            {touched.fullName && errors.fullName && (\n              <span className=\"error-text\">{errors.fullName}</span>\n            )}\n            {touched.fullName && !errors.fullName && formData.fullName && (\n              <span className=\"success-text\">✓ صحيح</span>\n            )}\n            <span className=\"hint-text\">أدخل الاسم الأول واسم الأب واسم الجد واسم العائلة</span>\n          </div>\n        </div>\n\n        <div className=\"form-section\">\n          <h4>بيانات الهوية (بالأرقام الإنجليزية)</h4>\n          <div className=\"identity-grid\">\n            <div className=\"form-group\">\n              <label>رقم الهاتف *</label>\n              <input\n                type=\"text\"\n                name=\"telephone\"\n                value={formData.telephone}\n                onChange={handleChange}\n                onBlur={handleBlur}\n                placeholder=\"01XXXXXXXXX\"\n                className={getFieldClass('telephone')}\n                dir=\"ltr\"\n                maxLength=\"11\"\n              />\n              {touched.telephone && errors.telephone && (\n                <span className=\"error-text\">{errors.telephone}</span>\n              )}\n              {touched.telephone && !errors.telephone && formData.telephone && (\n                <span className=\"success-text\">✓ صحيح</span>\n              )}\n              <span className=\"hint-text\">مثال: 01012345678</span>\n            </div>\n            <div className=\"form-group\">\n              <label>الرقم القومي *</label>\n              <input\n                type=\"text\"\n                name=\"nationalId\"\n                value={formData.nationalId}\n                onChange={handleChange}\n                onBlur={handleBlur}\n                placeholder=\"XXXXXXXXXXXXXX\"\n                className={getFieldClass('nationalId')}\n                dir=\"ltr\"\n                maxLength=\"14\"\n              />\n              {touched.nationalId && errors.nationalId && (\n                <span className=\"error-text\">{errors.nationalId}</span>\n              )}\n              {touched.nationalId && !errors.nationalId && formData.nationalId && (\n                <span className=\"success-text\">✓ صحيح</span>\n              )}\n              <span className=\"hint-text\">14 رقم من البطاقة الشخصية</span>\n            </div>\n            <div className=\"form-group\">\n              <label>الرقم التسلسلي *</label>\n              <input\n                type=\"text\"\n                name=\"serialNumber\"\n                value={formData.serialNumber}\n                onChange={handleChange}\n                onBlur={handleBlur}\n                placeholder=\"أدخل الرقم التسلسلي\"\n                className={getFieldClass('serialNumber')}\n                dir=\"ltr\"\n              />\n              {touched.serialNumber && errors.serialNumber && (\n                <span className=\"error-text\">{errors.serialNumber}</span>\n              )}\n              {touched.serialNumber && !errors.serialNumber && formData.serialNumber && (\n                <span className=\"success-text\">✓ صحيح</span>\n              )}\n            </div>\n            <div className=\"form-group\">\n              <label>رقم الفصيلة (للذكور - اختياري)</label>\n              <input\n                type=\"text\"\n                name=\"squadNumber\"\n                value={formData.squadNumber}\n                onChange={handleChange}\n                onBlur={handleBlur}\n                placeholder=\"أدخل رقم الفصيلة\"\n                className={getFieldClass('squadNumber')}\n                dir=\"ltr\"\n              />\n              {touched.squadNumber && errors.squadNumber && (\n                <span className=\"error-text\">{errors.squadNumber}</span>\n              )}\n              {touched.squadNumber && !errors.squadNumber && formData.squadNumber && (\n                <span className=\"success-text\">✓ صحيح</span>\n              )}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"form-section\">\n          <h4>البيانات الأكاديمية</h4>\n          <div className=\"academic-grid\">\n            <div className=\"form-group\">\n              <label>الكلية *</label>\n              <select\n                name=\"college\"\n                value={formData.college}\n                onChange={handleChange}\n                onBlur={handleBlur}\n                className={getFieldClass('college')}\n              >\n                <option value=\"\">-- اختر الكلية --</option>\n                {colleges.map((college, index) => (\n                  <option key={index} value={college}>\n                    {college}\n                  </option>\n                ))}\n              </select>\n              {touched.college && errors.college && (\n                <span className=\"error-text\">{errors.college}</span>\n              )}\n              {touched.college && !errors.college && formData.college && (\n                <span className=\"success-text\">✓ تم الاختيار</span>\n              )}\n            </div>\n            <div className=\"form-group\">\n              <label>السنة الدراسية *</label>\n              <select\n                name=\"academicYear\"\n                value={formData.academicYear}\n                onChange={handleChange}\n                onBlur={handleBlur}\n                className={getFieldClass('academicYear')}\n              >\n                <option value=\"\">-- اختر السنة الدراسية --</option>\n                {academicYears.map((year, index) => (\n                  <option key={index} value={year}>\n                    {year}\n                  </option>\n                ))}\n              </select>\n              {touched.academicYear && errors.academicYear && (\n                <span className=\"error-text\">{errors.academicYear}</span>\n              )}\n              {touched.academicYear && !errors.academicYear && formData.academicYear && (\n                <span className=\"success-text\">✓ تم الاختيار</span>\n              )}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"form-actions\">\n          <button type=\"submit\" className=\"submit-btn\" disabled={loading}>\n            {loading ? (\n              <>\n                <span className=\"spinner-small\"></span>\n                جاري التسجيل...\n              </>\n            ) : (\n              'تسجيل الطالب'\n            )}\n          </button>\n          <button \n            type=\"button\" \n            className=\"reset-btn\"\n            onClick={handleReset}\n            disabled={loading}\n          >\n            مسح البيانات\n          </button>\n        </div>\n      </form>\n    </div>\n  );\n}\n\nexport default StudentForm;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}